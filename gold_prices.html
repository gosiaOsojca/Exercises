<!DOCTYPE html lang="en">

<head>
    <title>Gold prices</title>
</head>

<body>

    <button class="firstButton">Sortuj po dacie rosnąco</button>
    <button class="secondButton">Sortuj po dacie malejąco</button>
    <button class="thirdButton">Sortuj po cenie rosnąco</button>
    <button class="fourthButton">Sortuj po cenie malejąco</button>

    <script>

        var body = document.getElementsByTagName('body')[0],
            sortAscendingByDateButton = document.getElementsByClassName('firstButton')[0],
            sortDescendingByDateButton = document.getElementsByClassName('secondButton')[0],
            sortAscendingByPriceButton = document.getElementsByClassName('thirdButton')[0],
            sortDescendingByPriceButton = document.getElementsByClassName('fourthButton')[0],
            dataArray = [
                [0, '23-03-2010', 24],
                [1, '05-03-2010', 19],
                [2, '05-03-2010', 29],
                [3, '01-04-2010', 36],
                [4, '12-10-2000', 12],
                [5, '23-04-2020', 17],
                [6, '18-04-1998', 21],
                [7, '01-02-1980', 40],
                [8, '01-12-2010', 44],
                [9, '26-02-2010', 42]
            ],
            i,
            table = document.createElement('table'),
            headerRow = document.createElement('tr'),
            headerItems = [],
            textNodes = [];


        // START Create Table Header
        createTableHeaderContent(textNodes);

        for (i = 0; i < 3; i++) {
            createTableHeader(headerItems[i], headerRow, textNodes[i]);
        }

        table.appendChild(headerRow);
        // END Create Table Header


        // START Create Table Rows
        var contentRows = [];
        for (i = 0; i < 10; i++) {
            var contentRows = createTableRows(contentRows[i]);
            table.appendChild(contentRows);
        }
        // END Create Table Rows

        body.appendChild(table);

        // START filling the table
        var tableCells = document.getElementsByTagName('td'),
            usefulDataArray = [],
            rowContents = [];

        for (i = 0; i < tableCells.length; i++) {
            usefulDataArray = prepareTableData(usefulDataArray, dataArray[i]);
        }

        for (i = 0; i < tableCells.length; i++) {
            fillTable(usefulDataArray[i], rowContents[i], tableCells[i]);
        }
        // END filling the table


        // START Sorting
        function DateAscendingComparator(a, b) {
            var c = a[1].split('-').reverse().join('');
            var d = b[1].split('-').reverse().join('');
            return c > d ? 1 :c < d ? -1 : 0;
        }

        function DateDescendingComparator(a, b) {
            var c = a[1].split('-').reverse().join('');
            var d = b[1].split('-').reverse().join('');
            return c > d ? -1 :c < d ? 1 : 0;
        }

        function PriceAscendingComparator(a, b) {
            if (a[2] < b[2]) return -1;
            if (a[2] > b[2]) return 1;
            return 0;
        }

        function PriceDescendingComparator(a, b) {
            if (a[2] < b[2]) return 1;
            if (a[2] > b[2]) return -1;
            return 0;
        }

        sortAscendingByDateButton.addEventListener('click', function () {
            sortData(dataArray, DateAscendingComparator, usefulDataArray, tableCells);
        }, false);

        sortDescendingByDateButton.addEventListener('click', function () {
            sortData(dataArray, DateDescendingComparator, usefulDataArray, tableCells);
        }, false);

        sortAscendingByPriceButton.addEventListener('click', function () {
            sortData(dataArray, PriceAscendingComparator, usefulDataArray, tableCells);
        }, false);

        sortDescendingByPriceButton.addEventListener('click', function () {
            sortData(dataArray, PriceDescendingComparator, usefulDataArray, tableCells);
        }, false);
        // END Sorting


        // START FUNCTIONS
        function createTableHeaderContent(textNodes) {
            textNodes[0] = document.createTextNode('Nr.');
            textNodes[1] = document.createTextNode('Data');
            textNodes[2] = document.createTextNode('Cena');
        }

        function createTableHeader(headerItems, headerRow, textNodes) {
            headerItems = document.createElement('th');
            headerItems.setAttribute('scope', 'row');
            headerItems.appendChild(textNodes);
            headerRow.appendChild(headerItems);
            return headerRow;
        }

        function createTableRows(contentRows) {
            contentRows = document.createElement('tr');
            var j;
            var rowItems = [];
            for (j = 0; j < 3; j++) {
                createTableRow(rowItems[j], contentRows);
            }
            return contentRows;
        }

        function createTableRow(rowItems, contentRows) {
            rowItems = document.createElement('td');
            contentRows.appendChild(rowItems);
        }

        function prepareTableData(usefulDataArray, dataArray) {
            usefulDataArray = usefulDataArray.concat(dataArray);
            return usefulDataArray;
        }

        function fillTable(usefulDataArray, rowContents, tableCells) {
            var contentValue;
            contentValue = usefulDataArray;
            rowContents = document.createTextNode(contentValue);
            tableCells.appendChild(rowContents);
        }

        function sortData(dataArray, Comparator, usefulDataArray, tableCells, ) {
            dataArray = dataArray.sort(Comparator);
            usefulDataArray.splice(0, usefulDataArray.length);
            for (i = 0; i < tableCells.length; i++) {
                usefulDataArray = prepareTableData(usefulDataArray, dataArray[i]);
                tableCells[i].innerHTML = '';
            }
            for (i = 0; i < tableCells.length; i++) {
                fillTable(usefulDataArray[i], rowContents[i], tableCells[i]);
            }
        }
        // END FUNCTIONS

    </script>

</body>

</html>