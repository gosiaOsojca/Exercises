<html>

<head></head>

<body>

    <div>
        <p>Give the amount of players</p>
        <input class="playersAmount" type="number">
        <button class="showButton">Show players</button>
    </div>

    <script>
        var showButton = document.getElementsByClassName('showButton')[0],
            playersAmountInput = document.getElementsByClassName('playersAmount')[0],
            body = document.getElementsByTagName('body')[0],
            players = [],
            songinputs = [],
            playerStatusValueNodes = [];
        showButton.addEventListener('click', function () {
            var playersAmount = playersAmountInput.value,
                i;
            for (i = 0; i < playersAmount; i++) {
                var playersItem = document.createElement('div');
                var playersTitle = document.createElement('p');
                var playersTitleNode = document.createTextNode('Give the title of the song');
                songinputs[i] = document.createElement('input');
                var playButton = document.createElement('button');
                playButton.setAttribute('id', i);
                var playButtonNode = document.createTextNode('PLAY');
                var stopButton = document.createElement('button');
                stopButton.setAttribute('id', i);
                var stopButtonNode = document.createTextNode('STOP');
                var playerStatus = document.createElement('span');
                var playerStatusNode = document.createTextNode('Status of the player: ');
                var playerStatusValue = document.createElement('span');
                var playerStatusValueNode = 'You are not listening any song right now.';
                playerStatusValueNodes[i] = document.createTextNode(playerStatusValueNode);
                playerStatusValue.appendChild(playerStatusValueNodes[i]);
                playerStatus.appendChild(playerStatusNode);
                stopButton.appendChild(stopButtonNode);
                playButton.appendChild(playButtonNode);
                playersTitle.appendChild(playersTitleNode);
                playersItem.appendChild(playersTitle);
                playersItem.appendChild(songinputs[i]);
                playersItem.appendChild(playButton);
                playersItem.appendChild(stopButton);
                playersItem.appendChild(playerStatus);
                playersItem.appendChild(playerStatusValue);
                body.appendChild(playersItem);
                players[i] = new musicPlayer();
                playButton.addEventListener('click', function () {
                    var songTitle = songinputs[this.id].value;
                    if (songTitle === '') {
                        alert("You have to choose a song :)");
                    } else {
                        players[this.id].play(songTitle);
                        playerStatusValueNodes[this.id].nodeValue = players[this.id].status;
                    }
                }, false);
                stopButton.addEventListener('click', function () {
                    var songTitle = songinputs[this.id].value;
                    players[this.id].stop(songTitle);
                    songinputs[this.id].value = '';
                    playerStatusValueNodes[this.id].nodeValue = players[this.id].status;
                }, false);
            }
        }, false);
        function musicPlayer() {
            this.songTitle = '';
            this.status = '';
        }
        musicPlayer.prototype.play = function (title) {
            this.songTitle = title;
            alert('The song title is: ' + title);
            this.status = "You are listening right now: " + title;
        }
        musicPlayer.prototype.stop = function (title) {
            if (this.songTitle === '') {
                alert('An error is occured');
                this.status = "You are not listening any song right now";
            } else {
                alert('You have stopped the song with title: ' + this.songTitle);
                this.songTitle = '';
                this.status = "You have stopped listening to: " + title;
            }
        }

    </script>

</body>

</html>
