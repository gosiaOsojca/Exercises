<html>

<head></head>

<body>

    <div>
        <p>Give the amount of players</p>
        <input class="playersAmount" type="number">
        <button class="showButton">Show players</button>
    </div>

    <script>
        var showButton = document.getElementsByClassName('showButton')[0],
            playersAmountInput = document.getElementsByClassName('playersAmount')[0],
            body = document.getElementsByTagName('body')[0],
            players = [],
            songinputs = [],
            playerStatusValueNodes = [],
            playersItems = [];

        showButton.addEventListener('click', function () {
            var playersAmount = playersAmountInput.value,
                i;
            for (i = 0; i < playersAmount; i++) {
                playersItems[i] = document.createElement('div');
                var playersTitle = document.createElement('p');
                var playersTitleNode = document.createTextNode('Give the title of the song');
                songinputs[i] = document.createElement('input');
                var playButton = document.createElement('button');
                playButton.setAttribute('id', i);
                var playButtonNode = document.createTextNode('PLAY');
                var stopButton = document.createElement('button');
                stopButton.setAttribute('id', i);
                var stopButtonNode = document.createTextNode('STOP');
                var playerStatus = document.createElement('span');
                var playerStatusNode = document.createTextNode('Status of the player: ');
                var playerStatusValue = document.createElement('span');
                var playerStatusValueNode = 'You are not listening any song right now.';
                var deleteButton = document.createElement('button');
                deleteButton.setAttribute('id', i);
                var deleteButtonNode = document.createTextNode('DELETE PLAYER');
                deleteButton.appendChild(deleteButtonNode);
                playerStatusValueNodes[i] = document.createTextNode(playerStatusValueNode);
                playerStatusValue.appendChild(playerStatusValueNodes[i]);
                playerStatus.appendChild(playerStatusNode);
                stopButton.appendChild(stopButtonNode);
                playButton.appendChild(playButtonNode);
                playersTitle.appendChild(playersTitleNode);
                playersItems[i].appendChild(playersTitle);
                playersItems[i].appendChild(songinputs[i]);
                playersItems[i].appendChild(playButton);
                playersItems[i].appendChild(stopButton);
                playersItems[i].appendChild(playerStatus);
                playersItems[i].appendChild(playerStatusValue);
                playersItems[i].appendChild(deleteButton);
                body.appendChild(playersItems[i]);
                players[i] = new musicPlayer('', '');

                players[i].addPlayer();

                playButton.addEventListener('click', function () {
                    var songTitle = songinputs[this.id].value;
                    players[this.id].play(songTitle);
                    players[this.id].setPlayerStatus(playerStatusValueNodes[this.id], players[this.id]);
                }, false);

                stopButton.addEventListener('click', function () {
                    var songTitle = songinputs[this.id].value;
                    players[this.id].stop(songTitle, songinputs[this.id]);
                    players[this.id].setPlayerStatus(playerStatusValueNodes[this.id], players[this.id]);
                }, false);

                // deleteButton.addEventListener('click', function () {
                //     players.splice((this.id), 1);
                //     playersItems[this.id].remove();
                // }, false);
            }
        }, false);

        class musicPlayer {
            constructor(songTitle, status) {
                this.songTitle = songTitle;
                this.status = status;
            }
            play(title) {
                this.songTitle = title;
                if (this.songTitle === '') {
                    alert("You have to choose a song :)");
                } else {
                    alert('The song title is: ' + title);
                    this.status = "You are listening right now: " + title;
                }
            }
            stop(title, input) {
                if (this.songTitle === '') {
                    alert('An error is occured');
                    this.status = "You are not listening any song right now";
                } else {
                    alert('You have stopped the song with title: ' + this.songTitle);
                    this.songTitle = '';
                    this.status = "You have stopped listening to: " + title;
                }
                input.value = '';
            }
            setPlayerStatus(span, players) {
                span.nodeValue = players.status;
            }
        }

        class PlayerSet {
            addPlayer() {

            }
            removePlayer() {

            }
        }

    </script>

</body>

</html>
